language: c

sudo: false

git:
  depth: 1

services:
  - docker

env:
  global:
    - secure: FWue01Z1GxSu4t8yD+kLKMqDFps1DasKWSbcd6OzSPxugQEW1PrfyQuqK65YH2pz1qEwkagaq9+dwUogggUIBB0Bjvvqic+DyWbcDRfRCDCC4YIPeBWg367LtZfWN9HO2u/OPQQK+glqoox9ni2HR0LMafdYQUr/jwzjrvgoHXxnKP2RwGj4/ab+i/p8AbzXSmZgWRSd8zROVXg3XTWohoA5UyRxLuglmAc/wVa4wTC5I7qduRO23jJESZr71LmOSylOrGMbCtl8OfEqEQ8NpHx66VyXEcOwvxPL9sxhvYafj4XfFe/FNvKKktJk6c9f00oUD2j5wfWNCI9cjCswmeSJKgGtD67ZDwXQV3twLbOEDpegnjmUsBcv9w61CDrnNlcr6j3JMgPK0WZlbm9G0/7x2AfJPgD+LbnlrlsiF73PumAZN4xV2dlVdSGUkpVp0DdUc/NTMix2D0GoKqBbpPuAPH4xYu01MROHwH0NxG+vp7l5UCSy+/soXrY8weY/IPo6ZcFNPyVZhwFVuiuZfmXtqHgpvBNv92uRMIPtDtuftccPqYOgFILNceVjr/BhUuHqCCvyV0RpLdBDaXMada9uUDv9NwF2DUhcUjSPVZs8XlQhZ/UZgZPTV7z+Fsgg5j90aJ0ZwUulXj2vkYQmPoYy4BQn8Z5//lNrqXQVEPE=
    - secure: BtgXoSgnRw7FxXTn7jKbjZM0hKXuNZMgDJv4j2xALRAztSp/WTthgdmry8lAKTeh4zU20rEG49c4R/pAiM3sLGsniNWP7sSIdl2JUxbu7M7OeRbrPAbHbVUz0/fT9Vd1DmaV0fvZDJjb0Ds21Py8bUdcSuZm1ofjOx2KYQDGthssIauljvMi6Wzl0uXNGDLJqKktQOxsGSyQ8i1JVH+hMM0k1NfAqmg1Wctv+MdFMPOoZKhUsYOooC6E+u1i1vvsN2DtcP/e9LWieJaMmoocFEDRwuRNJKsN0qKm03rbMqdwnp1s0HydoZofWqWHxcc44xms1t4YxU0z0+JUpozpbSF71ghHorLdoCaeTDW54HyjLOYRuOV/4hEw0OQwleHH1baJaxwLEOMEvNmXYC4fXK7bo3kjvyBAFp4EM1MjCVfRW6khVrcccT2FoQahgYue3JXNn5jBVtxLaXcw8QW6ft9bku6HYtJKFfs3YjTxtIderyxc5iK+HyJKhMGWUuMdnGP1HrSlRFtFi8o2vM2AN+sxQBwhGrLj0BybvuBa5VdhVvci76Gp8z5+YIr+1eOKyZ+Zibori9+N65fWlQCzaR6L6V5iaVQKRyT/gc7ApX714a+IdLnH+zm2YRWs2zOb4/2VBtn83dJ8ZBN2Oqj//w21D0swC1Jp5pbWudsX5Eo=
    - secure: Emu/v9QeWQQva1KzWvpO6SH0Ar93+Yb3XRFfTYoiuQ4DuwsC3gbBNSHZFuz0gvsWM3mxo9ViaC5WnCwDckk6IN1jEZZrMPEZBs2jthtYc+z/wYMmLooBtwncLTMx8Jj34Pz/nyj4JceUpl+iARNbHc0jTh8Zg5XmPsj+ncA6A/Ld8BCjDhZ7+7gv2u4o150SVhx8HbWyuzcfP6Owuiu5BFNpTUZonqAZz5tWHoQh0/dLyYU7rslvcldioGKgolR617kzQ54zqd+21q8UMwHI1VMsbHQIayzYjBbItGlKknQBAqpJnU9dmmDRFjSixL6lEoweHPbNwfOU8xTQ9PZNmbHmDb9ea/W4ONZOg7jOX4NtTukTPIpGY2Cf2ADBWvLSXPBh7hJr6QGCXPiMYzpMy6MFiMWRiG3BWXmijNZTyUiVDYflnTBDdSYk5p58MGRpSwLhgU+dtrSu9OfjoYFmJVDEV0l/3Oqmzd+sotG26lXxM8XsFpVd3F3WKaI089ckOLVXDxQ7ls6JIgAEd5jyktGCwPRJBrQ2znZUw1w3ktWSVuJeNFD1wio/GQAqeTjzsQr45GsMU5KVbgNwKJmOsZK0ICUKFaBGANAGmBYUqoLocMElW7G74A4mgPannW/3YO3Au7Y8gVvJFBhGu1Z9vtsXgS0XbQeZzKpTH7ykb3o=
    - secure: Gs7SP0+ClGarDNebK/gQcYwKC8nWM1PIVEoLk9X3pqvXbvGrtbn99VwxC/ndHgWS34MeAnphiEHS4BSq6C7ltZ9fsSObnjA7n2a/Rosvklmt8VEmUFtX9Y8VAEizUYlnHJa9nu8VcHZHlxSPN3DR2ab5rYPt/Z2WWM7hsTFNLrTDzr3aKh9JhAdwbapmhSdnhc3XD4XIP17E3HAc8DM/KwSd2ES9/TG3xUMM+BNYu//2PImIwY20BP5Na3qmUcd/1Dc2te+enIq1KIeDxMyDelCoZRzAR/QMLO/7Vd9eXlD//APzQxyzsyUpJKjPTxlHqHcOmcPPraiT2yVaTWVezUGSByHVUX3kBKNWkXbYaFWlDFqP887SPUMscVDArpmIx5ZhiLp5CDx8wuUMtBqCX424jbknXLqU2RV9ZnzuaJCIqu0B3DziL4GmHNBRpYOs1pFoG4nfOtfw334fcDjS9ovdXWsUpTZZr8U2Jr1TxegNxIM96WhDy3Lt8ub8iVaQ9RwbnOIUJmbKIymoyVRBMw/KgxMH6mZyVjodCTOX0tEdMhHaZqRebG5aG71ZBlD3+fSU/HAgrWqNnUCf1bHApn+saALYeUBmZhezyl2zTQwkYz8bjCE2ik2UoXusejIi/ilPmaQp14ZjSwqOruj7yqOS+3U05oR4t3WzIl7X6/U=
    - secure: sHPv1IxXCuD2pcyBtlPVnLYBoxH1Dgy+uz23XBjSzoePJhOtx4t71CeApD1fIVi5xgdmZauLqmm2FMw6hoHRYO4ng8BnUw7Sqr/9G0XxkjcVZbDGASP8PEC4c/YZ3LGCpJp9q4qHCRffd6VsV4MJ+yG0wu/EJz+ACZEwCgyIgRgmgopt5irDlBj2SlJk93rbZSvrsea2V7W5O2eamBrHnWBhESvqxFzLPg8jpGw2B+joB8gVk90vrNnoc5SzXKBZQdyR+7Sx750DIdik41wtQ866Ab29tc89hSUgaknSMpdPvMVxmERdALi1OCD3z9fZMFXyp+XDd780IRGYOujXosm2P9dDNP8MBksDUmk+cTVPDS55upQ8NOJWJbvzQD3xoEhaVSPoEk+HHT8hvA/mYeJDlTxmnGCOHo4agwe8I/g9lYbywhq33Xm183y8nuV7sUv23jk6H9T2GJtlm5KmDO6gCokc1iTRfIR6GDhwhB0EBYC7FLDbSgmsHT8XbpPA1s9CzQSQXZMI58IUqmErxz3RCYAGn0NmCkSkQuHh+/x/AnGyMtwr1cvEae1J4gDRkMVDaPIe8DZSZmO+A3Poq2IRbjft/N4EZB4aB2lUQvyMHuHNemuzfS6GBGx9SGjDy2DIt0K3yERx/RlWtgU5qUj4MzQ7kMqtNHZ+Lut/3JM=
    - secure: tUBHb9AxL3PYNNG33ZOSPDpjClzGwMKkpZapdBDJPlSt9vZMvyRaVkgKjDJaMTTeZTIH/5+R8s/ekzPWFSI8NvnikSEJbocbY8uTmBorDDo60vaQ28fX38IJHj/e+SMhXVAHsKUBRzJ7UrksAus6QlOAkwsvxQUck+m/EjLYIc+/qdw5rbH/nyEt7j5Wn8eC2EqihSatz8XIZU0IWbJHLmDGBQjJm80EvzzNDvzmck80pBlpCyA0aaArV/drTFF1eS/zGyX2xcTQmvh/NNn8QbI8Hc6CGvmRiWFj+5Rk6XidHSGejQUn81JaCpzV4H+BU89Y2HvxBAxfLEXDsoTgdaDCcNPkJwDe5TfA9PzNM8E89A9VrplRwJDP4bXqfDDfrmOM2y8IYzxDEmCUWmPsD9II73rQOg00olTug2aXAFJjfsylMNbUFV1JvcW6sPGGnOQAXdfw39Cvw60uCZ0aAJSoEVkAs6fRwQWjWdFAUiRL317O+NT7qILH6L5ROsQVQ+cphAyQEIGZAAf7vUu5i9iV192xAh80K3Ocd4luu8m+NHawrBJRCu37GNNvGKr3g+DRYZi4/SqJusJlEXhWRNHQKz/fBLw1m90wENhTCtmAE7iOJP60pT100+qQV468b5M/PqgzZAkBVvdecN4h6TP3WCwnWjATHWJeP4MmVtY=

cache:
  directories:
    - /home/travis/mmphego/nuke-old-tweets/.semiphemeral

install:
  - openssl aes-256-cbc -K $encrypted_ebe4013f8360_key -iv $encrypted_ebe4013f8360_iv -in secrets.zip.enc -out secrets.zip -d
  - unzip secrets.zip

script:
  - docker build -t mmphego/nuke_my_tweets .

after_script:
  - docker run --env API_KEY=$API_KEY --env API_SECRET=$API_SECRET --env ACCESS_TOKEN_KEY=$ACCESS_TOKEN_KEY --env ACCESS_TOKEN_SECRET=$ACCESS_TOKEN_SECRET --env TWITTER_USERNAME=$TWITTER_USERNAME -ti --user mmphego mmphego/nuke_my_tweets

